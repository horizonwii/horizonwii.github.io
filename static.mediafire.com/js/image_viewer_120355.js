var aEQ={aIa:'auto',aIz:20,aGh:0,aIg:[[32,32],[107,80],[191,145],[335,251],[515,386],[800,600],[1024,768],[1280,800],[1600,1200],[1680,1050],[1920,1080],[2240,1680],[2560,1920],[3072,2304],[3264,2448],[4064,2704]],VJ:[140,305,445],aqZ:(BrowserName()=='Internet Explorer'&&aqY.aqI<10),aFs:'',aHA:1,aMJ:0,aFB:[],aGg:0,IV_iThumbBuffer:0,aGR:'',aGs:0,aGI:null,aEO:0,aFC:'',aFE:1.0,aFd:0,aQd:1,aHv:1,aLa:0,aNt:2,aNB:0,bcH:false,bdl:0,nq:0,bhe:true,bgs:false,bph:true,bnG:false,aGA:new Image(),aHi:new Image(),aMq:[],IV_oDetachedThumbs:{},aGx:$('#pdfPages'),aWL:$("#container"),aFw:$('#viewer'),aER:$('#viewer img'),aIf:$('.nativeResContainer'),aHN:$('.nativeResContainer img'),aNr:$('.nativeResContainer .prev-button'),aMG:$('.nativeResContainer .next-button'),aND:$('.nativeResContainer .popup-close-image'),auU:$('#viewer .private-label'),aHh:$('#loadingPlaceholder'),aIb:$('#loadingPlaceholder .progressbar div'),aFy:$('#pagePreviews'),aGo:$('#pagePreviews p'),aJU:$('#pagePreviews .galleryWrapper'),aHI:$('#pagePreviews .thumbWrapper'),aIe:$('#headerControlsImageView'),bhY:$('.filepreview-controlbar'),aHL:$('.filepreview-controlbar .toolBar'),bhd:$('#info'),aVT:$('.mediaDescription'),bhf:$('.mediaDescription .descriptionClose'),aPU:$('.mediaDescription p'),IV_jFilename:$('#image_filename'),aQi:$('#new_image_filename'),IV_jOwner:$('#image_author'),IV_jFullButton:$('.ico30single'),IV_jFilmButton:$('.ico30filmstrip'),IV_jGridButton:$('.ico30thumbnail'),aOt:$('.ico30prevItem'),IV_jCurrentPage:$('#pageCounter #currentPage'),IV_jNextButton:$('.ico30nextItem'),aHg:$('.ico30zoomOut'),aHZ:$('#scaleSelect'),aHj:$('.ico30zoomIn'),pI:$('.ico30smallThumb'),pF:$('.ico30mediumThumb'),abO:$('.ico30largeThumb'),aJk:$('#contextmenu'),aGu:function(aGJ){this.aFs=aGJ.aFs;this.aHA=aGJ.aHA;this.aMJ=aGJ.aMJ;this.aFB=aGJ.aFB;this.aGg=aGJ.aGg;this.IV_iThumbBuffer=aGJ.IV_iThumbBuffer;this.aZu=aGJ.aZu;this.aYW=aGJ.aYW;this.adG=aGJ.adG;this.bnG=aGJ.bnG;this.XJ();if(aGJ.biq){aOS.Yw(function(aQg){aEQ.aFB=[];aEQ.bjf();});}else{this.biK();}},bjf:function(aNv){if(typeof aNv=='undefined'){aNv=1;}aOS.aEn({data:{content_type:'files',filter:'image',chunk:aNv}},function(aQg){var aNv=parseInt(aQg.chunk_number)||0;var aOi=true;var biu=0;for(var aGG in aQg.files){biu++;if(biu<=aEQ.aFB.length||biu>aEQ.aMJ){continue;}var aOA=aQg.files[aGG];if(avH(aOA.flag,3)==1){continue;}var IV_bTOS=avH(aOA.flag,9)==1;if(IV_bTOS){continue;}aEQ.aFB.push({aFs:aGG,aHf:aOA.filename,aHD:aOA.size,aHn:aOA.description,aHP:aOA.owner_name,aFg:aOA.rotation,aGd:aOA.hash,aIw:(avH(aOA.flag,1)==1),aHT:(avH(aOA.flag,9)||aOA.privacy=='private'),aRw:NZ(aOA),aOK:(avH(aOA.flag,0)==1),aGH:0,aIq:0,aHv:0,aut:false,aZO:aOA.created});aOi=false;}if(!aOi&&aEQ.aFB.length%100){aOi=true;}if(aOi){aEQ.bjx();}else{aEQ.bjf(aNv+1);}},-2);},biK:function(){var bnO=this;var aGB=[];for(var aEU=0;aEU<this.aFB.length;aEU++){aGB.push(this.aFB[aEU].aFs);}var aQW={};var IV_oImageData={};tH.Cp.asi(aGB.join(),function(aQg){if(aQg.response.file_info){var aRc=aQg.response.file_info;aQW[aRc.quickkey||aGB[0]]=aRc.flag;IV_oImageData[aRc.quickkey||aGB[0]]={aHf:aRc.filename,aHD:aRc.size,aHn:aRc.description,aHP:aRc.owner_name,aGd:aRc.hash,aIw:(avH(aRc.flag,1)==1),aHT:(aRc.privacy=='private'),aRw:NZ(aRc),aOK:(avH(aRc.flag,0)==1),aGH:0,aIq:0,aHv:0,aut:false,aZO:aRc.created}}if(aQg.response.file_infos){$.each(aQg.response.file_infos,function(x,aRc){var aPz={};aPz.aSl=avH(aRc.flag,3);aPz.IV_iTOS=avH(aRc.flag,9);aPz.aTf=avH(aRc.flag,0);aQW[aRc.quickkey]=aPz;IV_oImageData[aRc.quickkey]={aHf:aRc.filename,aHD:aRc.size,aHn:aRc.description,aHP:aRc.owner_name,aGd:aRc.hash,aIw:(avH(aRc.flag,1)==1),aHT:(aRc.privacy=='private'),aRw:NZ(aRc),aOK:(avH(aRc.flag,0)==1),aGH:0,aIq:0,aHv:0,aut:false,aZO:aRc.created}});}var aRP=[];for(var aEU=0;aEU<aEQ.aFB.length;aEU++){var IV_sThisKey=aEQ.aFB[aEU].aFs;var aPz=aQW[IV_sThisKey];if(typeof aPz=='undefined'||aPz.aSl||aPz.IV_iTOS){continue;}aEQ.aFB[aEU].aOK=(aPz.aTf==1);aEQ.aFB[aEU]=$.extend(aEQ.aFB[aEU],IV_oImageData[IV_sThisKey]);aRP.push(aEQ.aFB[aEU]);}aEQ.aFB=aRP;if(aRP.length>0){aEQ.bjx();}else{bnO.ZU();Zi(0,"There are no images available with the current filter settings.");}});},bjx:function(){this.aEO=this.aFB.length;$('#numPages').text(this.aEO);this.aZu=0;var bSomeOwned=false;var bSomeNotOwned=false;for(var aEU=0;aEU<this.aFB.length;aEU++){if(this.aFB[aEU].aIw){bSomeOwned=true;}else{bSomeNotOwned=true;}if(bSomeOwned&&bSomeNotOwned){break;}}if(bSomeOwned){this.aZu=bSomeNotOwned?1:2;}if(this.aFB.length<=1){this.aWL.addClass('singleImage');}if(this.aZu==1){this.aWL.addClass('partOwner');this.bhY.addClass('partOwner');}else if(this.aZu==2){this.aWL.addClass('owner');this.bhY.addClass('owner');}if(!acK){this.aWL.addClass('loggedIn');}if(this.aYW){this.aWL.addClass('viewingRoot');var adf=window.location.hash.replace('#','');if(adf){var aSa=false;for(var aEU=0;aEU<this.aFB.length;aEU++){if(adf==this.aFB[aEU].aFs){aSa=true;break;}}if(!aSa){window.location='/view/'+adf+'/';return;}}}this.aHk();$(window).hashchange(function(){if(!aEQ.aGI){return;}aEQ.aHk();}).resize(function(){aEQ.aFa();aEQ.bgX();if(aEQ.aGR!='full'){aEQ.aIY();}aEQ.aJU.trigger('scroll.iv');});$(document).bind('keydown.iv','left',function(){aEQ.aFq(aEQ.aGs-1);}).bind('keydown.iv','up',function(){aEQ.aFq(aEQ.aGs-1);}).bind('keydown.iv','right',function(){aEQ.aFq(aEQ.aGs+1);}).bind('keydown.iv','down',function(){aEQ.aFq(aEQ.aGs+1);}).bind('keydown.iv','esc',function(){if(aEQ.aFC=='full-screen'){aEQ.aFa(aEQ.aIa);}aEQ.aJE();aEQ.aHX();}).on('keydown.iv',function(e){var aUO=String.fromCharCode(e.which);if(e.ctrlKey||e.metaKey){if(aUO=='A'){aEQ.aUV();e.preventDefault();}}}).on('click.iv',function(aKw){if(aKw.which==3){return;}aEQ.aHX();}).on('fullscreenchange webkitfullscreenchange mozfullscreenchange',function(aKw){if(!(document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen)){aEQ.aFa(aEQ.aIa);}});if(!$(document.body).hasClass('mobile-device')){$(document).on('mousemove.iv',function(){aEQ.aHL.fadeIn('fast');aEQ.aNB=0;});}this.aJU.on('scroll.iv',function(){aEQ.bcH=true;clearTimeout(aEQ.nq);aEQ.nq=setTimeout(function(){aEQ.bcH=false;var aHv=1;if(aEQ.aGR=='grid'){aHv=aEQ.aHv;}var IV_iGalleryTop=aEQ.aJU.offset().top;var IV_iThumbHeight=aEQ.VJ[aHv-1];for(bcI=1;bcI<=aEQ.aEO;bcI++){var aIn=$('#thumbnailAnchor'+bcI,aEQ.aJU);if(aIn.length){var IV_iThumbTop=aIn.offset().top-IV_iGalleryTop;var IV_iThumbBottom=IV_iThumbTop+IV_iThumbHeight;if(IV_iThumbBottom>IV_iGalleryTop){aEQ.aQd=bcI;break;}}}aEQ.aOJ();},125);});$('.IV_main_nav-download-image').on('mousedown.iv',function(){var IV_jLink=$(this);if(!IV_jLink.is('a')){IV_jLink=$('a',IV_jLink);}IV_jLink.attr('href','/?'+aEQ.aFs);});$('.IV_main_nav-download-gallery, .IV_main_nav-download-selection').on('click.iv',function(){aHt();});$('.IV_main_nav-share-image').on('click.iv',function(){aFU(aEQ.aGq);});$('.IV_main_nav-share-gallery').on('click.iv',function(){aFU('gallery');});$('.IV_main_nav-share-selection').on('click.iv',function(){aFU('selection');});$('.IV_main_nav-unfollow-image').on('click.iv',function(){bnu();});$('.IV_main_nav-unfollow-gallery').on('click.iv',function(){boS();});$('.IV_main_nav-rename-image').on('click.iv',function(){aPe(aEQ.aFs);});$('.IV_main_nav-desc-image').on('click.iv',function(){aPe(aEQ.aFs,true);});$('.IV_main_nav-delete-image').on('click.iv',function(){aMg(aEQ.aFs);});var aKp=false;var aKa=0;var aKl=0;var aJH=aKa;var aJa=aKl;this.aGx.on('mousedown.iv',function(aKw){if(aKw.which==3){return;}aKp=true;aKa=aKw.pageX;aKl=aKw.pageY;aJH=aKa;aJa=aKl;aKw.preventDefault();}).on('mousemove.iv',function(aKw){if(!aKp){return;}var aLp=aKw.pageX-aJH;var aLW=aKw.pageY-aJa;aJH=aKw.pageX;aJa=aKw.pageY;aEQ.aGx.scrollLeft(aEQ.aGx.scrollLeft()-aLp).scrollTop(aEQ.aGx.scrollTop()-aLW);}).on('mouseleave.iv',function(aKw){aKp=false;}).on('click.iv',function(aKw){if(aKw.which==3){return;}aKp=false;}).on('contextmenu.iv',function(aKw){aKp=false;aEQ.aHX();aKw.preventDefault();});if(!($(document.body).hasClass('mobile-device'))){this.aHL.css('opacity','0.5').on('mousedown.iv',function(){aEQ.aNB=0;}).on('mouseover.iv',function(){aEQ.aHL.animate({opacity:1},{duration:'slow',queue:false});}).on('mouseout.iv',function(){aEQ.aHL.animate({opacity:0.5},{duration:'slow',queue:false});});}this.aIf.on('mousedown.iv',function(aKw){if(aKw.which==3){return;}if(aEQ.aFC=='full-screen'){aEQ.aMy();}aEQ.aHX();});this.aIf.find('.popup-close').on('mousedown.iv',function(aKw){if(aKw.which==3){return;}aEQ.aFa(aEQ.aIa);});if(this.aEO>1){this.aIf.on('mousemove.iv',function(){aEQ.aNr.fadeIn('fast');aEQ.aMG.fadeIn('fast');aEQ.aNB=0;});this.aNr.css('opacity','0.5').on('mousedown.iv',function(aKw){aEQ.aFq(aEQ.aGs-1);aEQ.aNB=0;aKw.stopPropagation();}).on('mouseover.iv',function(){aEQ.aNr.animate({opacity:1},{duration:'slow',queue:false});}).on('mouseout.iv',function(){aEQ.aNr.animate({opacity:0.5},{duration:'slow',queue:false});});this.aMG.css('opacity','0.5').on('mousedown.iv',function(aKw){aEQ.aFq(aEQ.aGs+1);aEQ.aNB=0;aKw.stopPropagation();}).on('mouseover.iv',function(){aEQ.aMG.animate({opacity:1},{duration:'slow',queue:false});}).on('mouseout.iv',function(){aEQ.aMG.animate({opacity:0.5},{duration:'slow',queue:false});});this.aND.on('mousedown.iv',function(aKw){aEQ.aIf.trigger('mousedown');aKw.stopPropagation();});}setInterval(function(){if(aEQ.aNB==aEQ.aNt){if(!($("body").hasClass("mobile-device"))){if(aEQ.aHL.css('opacity')!='1'){aEQ.aHL.fadeOut('slow',function(){aEQ.aHL.css('opacity','0.5');});}}if(aEQ.aNr.css('opacity')!='1'&&aEQ.aMG.css('opacity')!='1'){aEQ.aNr.fadeOut('slow',function(){aEQ.aNr.css('opacity','0.5');});aEQ.aMG.fadeOut('slow',function(){aEQ.aMG.css('opacity','0.5');});}}aEQ.aNB++;},500);this.IV_jFullButton.on('click.iv',function(){aEQ.aGb('full');});this.IV_jFilmButton.on('click.iv',function(){aEQ.aGb('film');});this.IV_jGridButton.on('click.iv',function(){aEQ.aGb('grid');setTimeout(function(){aEQ.aIY();},0);});$('.firstImage').on('click.iv',function(){aEQ.aFq(1);});this.aOt.on('click.iv',function(){aEQ.aFq(aEQ.aGs-1);});this.IV_jNextButton.on('click.iv',function(){aEQ.aFq(aEQ.aGs+1);});$('.lastImage').on('click.iv',function(){aEQ.aFq(aEQ.aEO);});$('.ico30rotateCCW').on('click.iv',function(){aEQ.aGI.aFg=(aEQ.aGI.aFg+270)%360;aEQ.aIE(true);});$('.ico30rotateCW').on('click.iv',function(){aEQ.aGI.aFg=(aEQ.aGI.aFg+90)%360;aEQ.aIE(true);});this.aHg.on('click.iv',function(){if(aEQ.aHh.hasClass('active')){return;}aEQ.aID(-1);});this.aHZ.on('change.iv',function(){aEQ.aFa(aEQ.aHZ.val());aEQ.aHZ.blur();});this.aHj.on('click.iv',function(){if(aEQ.aHh.hasClass('active')){return;}aEQ.aID(1);});this.bhd.on('click.iv',function(){if(aEQ.aVT.is(':visible')){aEQ.bhf.trigger('click');return;}aEQ.bgs=true;aEQ.aVT.fadeIn('fast');});this.bhf.on('click.iv',function(){aEQ.bgs=false;aEQ.aVT.fadeOut('fast');});this.pI.on('click.iv',function(){aEQ.aIY(1);aEQ.aFS();setTimeout(function(){aEQ.aIY();},0);});this.pF.on('click.iv',function(){aEQ.aIY(2);aEQ.aFS();setTimeout(function(){aEQ.aIY();},0);});this.abO.on('click.iv',function(){aEQ.aIY(3);aEQ.aFS();setTimeout(function(){aEQ.aIY();},0);});this.aER.on('click.iv',function(aKw){if(aKw.pageX==aKa&&aKw.pageY==aKl){if(aEQ.aFC==aEQ.aIa){aEQ.aFa('original');}else{aEQ.aFa(aEQ.aIa);}}}).on('contextmenu.iv',function(aKw){aEQ.aKQ(aKw.pageX,aKw.pageY);aKw.preventDefault();aKw.stopPropagation();});this.aHN.on('contextmenu.iv',function(aKw){aEQ.aKQ(aKw.pageX,aKw.pageY);aKw.preventDefault();setTimeout(aEQ.aIY,1000);});$('#popup-section').show();},aHk:function(){var aEW=null;var aGa=window.location.hash.substr(1).split(',');if(aGa[aGa.length-1]=='full'||aGa[aGa.length-1]=='film'||aGa[aGa.length-1]=='grid'){aEW=aGa.pop();}if(this.aEO.length==0){return;}var aHC=1;if(aGa.length){for(var aEU=0;aEU<this.aEO;aEU++){if(this.aFB[aEU].aFs==aGa[0]){aHC=aEU+1;break;}}}this.aFq(aHC);if(this.bhe){if(this.aGI.aHn){this.bgs=true;this.aVT.show();}this.bhe=false;}if(this.bgs){if(!this.aGI.aHn){if(this.aVT.is(':visible')){this.aVT.hide();}}else{if(this.aVT.is(':hidden')){this.aVT.show();}}}if(!this.aHH&& !aEW){if(this.aEO>1){aEW='film';}else{aEW='full';}}this.aGb(aEW);},aGb:function(aGk){if(aGk==this.aGR|| !(aGk=='full'||aGk=='film'||aGk=='grid')){return;}this.aGR=aGk;$('.toggleOn').removeClass('toggleOn');if(aGk=='full'){this.IV_jFullButton.addClass('toggleOn');this.aWL.removeClass('filmstripView galleryView').addClass('fullView');this.aGx.removeClass('hidden sidebarView').addClass('fullsizeView');this.aIe.removeClass('galleryToolbar filmToolbar').addClass('imageToolbar');this.aFy.removeClass('fullsizeView').addClass('hidden sidebarView');this.aJE();}else if(aGk=='film'){this.IV_jFilmButton.addClass('toggleOn');this.aWL.removeClass('fullView galleryView').addClass('filmstripView');this.aGx.removeClass('hidden fullsizeView').addClass('sidebarView');this.aIe.removeClass('imageToolbar galleryToolbar').addClass('filmToolbar');this.aFy.removeClass('hidden fullsizeView').addClass('sidebarView');}else{this.IV_jGridButton.addClass('toggleOn');this.aWL.removeClass('fullView filmstripView').addClass('galleryView');this.aGx.removeClass('hidden sidebarView').addClass('fullsizeView');this.aIe.removeClass('imageToolbar filmToolbar').addClass('galleryToolbar');this.aFy.removeClass('hidden sidebarView').addClass('fullsizeView');this.auU.css('z-index','-100');this.aGo.hide();this.aHR(adp);}if(aGk!='full'){this.aIY();this.aFS();}if(aGk!='grid'){this.auU.css('z-index','');this.aGo.show();this.aHR();this.aFa(this.aIa);}this.bgX();this.aFu();},aFq:function(aGq,vs){if(vs){this.aHI.empty();}if(this.aFB.length==0){return;}if(aGq<1){aGq+=this.aEO;}else if(aGq>this.aEO){aGq-=this.aEO;}aGq=Math.max(1,Math.min(aGq,this.aEO));if(aGq==this.aGs&& !vs){return;}this.aGs=aGq;this.aGI=this.aFB[aGq-1];var aFK=window.screen.availWidth;var aIB=window.screen.availHeight;this.aGI.aGH=this.aIg.length-1;for(var aHx=0;aHx<this.aIg.length-1;aHx++){if(aHx==8||aHx==6){continue;}if(this.aIg[aHx][0]>aFK||this.aIg[aHx][1]>aIB){this.aGI.aGH=aHx;break;}}this.aGI.aIq=this.aGI.aGH;this.aGI.aut=false;this.aFs=this.aGI.aFs;aEQ.bnm();if(this.aEO>1){this.IV_jCurrentPage.text(this.aGs);$('.imageThumb').removeClass('active');$('#thumbnailAnchor'+this.aGs).addClass('active');}this.aHR();if(this.aGI.aHn){this.aPU.html(bhh(this.aGI.aHn));}else{this.aPU.html('&nbsp;');}this.bgX();if(this.aGI.aHT){this.auU.show();}else{this.auU.hide();}var aIj=adv(true,'convkey',this.aGI.aGd.substr(0,4),this.aFs+this.aGI.aGH.toString(36)+'g.jpg');var bcl=adv(true,'convkey',this.aGI.aGd.substr(0,4),this.aFs+'zg.jpg');if(this.aGA.src==aIj){this.aFz(vs);}else{if(this.aFC=='full-screen'){this.aHN.hide();var Pq=this.aFC;this.aFC=this.aIa;this.aFa(Pq);this.aGA.src=aIj;this.aER.data('fullsize',bcl);}else{this.aFw.hide();this.XJ();this.aER.hide().attr('src','../../images/clear1x1.gif').attr('alt','Loading...').data('fullsize',bcl);this.aGA.src=aIj;this.aGA.onload=function(){if(aEQ.aFC=='full-screen'){return;}aEQ.aID();aEQ.aFz(vs);aEQ.aFw.show();aEQ.ZU();};}if(!$.inArray(aIj,this.aMq)){this.aMq.push(aIj);}}$('.imageDownload').attr('href','/?'+this.aFs);this.aFS();this.aFu();},aFu:function(){var aFv='';if(this.aEO>1){aFv+=this.aFs;if(this.aGR&&this.aGR!='film'){aFv+=','+this.aGR;}}if(aFv){aFv='#'+aFv;}window.location.hash=aFv;},aHR:function(pz){if(typeof pz=='undefined'){pz=this.aGI.aHf;}document.title=pz+' - MediaFire';this.IV_jFilename.attr('title',pz).text(pz);this.aQi.val(pz);if(!this.aGI.aIw&&this.aGI.aHP){this.IV_jOwner.attr('title','shared by "'+this.aGI.aHP+'"').text('shared by "'+this.aGI.aHP+'"');}else{this.IV_jOwner.html('');}},aFz:function(vs){this.aIE();this.aER.attr('src',this.aGA.src).attr('alt',this.aGI.aHf).show();if(this.aEO>1&& !$('#thumbnailAnchor1').length){var aFL='';for(var aEU=0;aEU<this.aEO;aEU++){var aGq=aEU+1;var sActive=(aGq==this.aGs)?' active':'';var aHU=this.aFB[aEU].aHf;if(this.aFB[aEU].aHn){aHU+=' - '+this.aFB[aEU].aHn;}var aIn=$('<a>',{id:'thumbnailAnchor'+aGq,class:'imageThumb'+sActive,href:'#'+this.aFB[aEU].aFs,title:aHU});var SZ=$('<div>',{id:'thumbnailContainer'+aGq,class:'thumbnail'});if(this.aFB[aEU].aHT){Up=$('<div>',{class:'private-label ico30lock plainTxtBtn reversedIcons'});Up.append('Private');SZ.append(Up);}var bcl=adv(true,'convkey',this.aFB[aEU].aGd.substr(0,4),this.aFB[aEU].aFs+'zg.jpg');if(vs){var aHv=2;if(this.aFB[aEU].aHv){aHv=this.aFB[aEU].aHv+1;}var bcq=adv(true,'convkey',this.aFB[aEU].aGd.substr(0,4),this.aFB[aEU].aFs+aHv+'g.jpg');var bcN=$('<img>',{src:bcq,alt:aHU});}else{var bcN=$('<img>',{class:'loading',src:'/images/icons/spinner/ajax-loader.gif',alt:aHU});}bcN.data('fullsize',bcl);SZ.append(bcN);aIn.append(SZ);var UW=$('<div>',{class:'thumbPageNumber'});UW.text(this.aFB[aEU].aHf);aIn.append(UW);this.IV_oDetachedThumbs[''+aGq]=aIn.children().detach();this.aHI.append(aIn);}aEQ.aOJ();aEQ.aIY();aEQ.aFS();$('.imageThumb').on('click.iv',function(aKw){if(aKw.which==3){return;}var aIc=$('.imageThumb.selected');var aIn=$(this);var aIu=parseInt(aIn.attr('id').substr('thumbnailAnchor'.length));var aGi=$('#thumbnailAnchor'+aEQ.aGs);if(aKw.ctrlKey||aKw.metaKey||aKw.shiftKey){if(!aIc.length&&aIu!=aEQ.aGs){aGi.addClass('selected');}aIn.toggleClass('selected');if(aKw.shiftKey){var aHs=Math.min(aEQ.aGs,aIu);var aHO=Math.max(aEQ.aGs,aIu);for(var aEU=aHs+1;aEU<aHO;aEU++){$('#thumbnailAnchor'+aEU).toggleClass('selected');}}aEQ.aFq(aIu);aEQ.aJd();aKw.preventDefault();}else{aEQ.aJE();}}).on('contextmenu.iv',function(aKw){if(!($('.imageThumb.selected').length>1&&$(this).hasClass('selected'))){aEQ.aJE();}aEQ.aKQ(aKw.pageX,aKw.pageY,this);aKw.preventDefault();aKw.stopPropagation();});if(!this.aqZ){this.aHI.off('mousedown.iv contextmenu.iv').on('mousedown.iv',function(aKw){if(aKw.which==3){return;}if(!(aKw.ctrlKey||aKw.metaKey||aKw.shiftKey)){aEQ.aJE();}aEQ.aHX();}).on('contextmenu.iv',function(aKw){aEQ.aHX();aKw.preventDefault();});this.aJU.off('mousedown.iv').on('mousedown.iv',function(aKw){aKw.preventDefault();})}}this.aNS();},XJ:function(aNc){if(this.aHh.hasClass('active')){return;}if(aNc){this.aWL.removeClass('filmstripView');}this.aLa=$.now();this.aFd=0;this.aHh.addClass('active');this.aIb.css('width',this.aFd+'%');(function aES(){setTimeout(function(){var aIF=$.now()-aEQ.aLa;if(aIF>250&&aEQ.aHh.hasClass('active')&&aEQ.aHh.is(':hidden')){aEQ.aHh.show();}var aGz=aIF/aEQ.aHA;aGz=1-aGz;aGz=Math.pow(aGz,10);aGz=1-aGz;aEQ.aFd=Math.round(aGz*100);if(aEQ.aHh.hasClass('active')){aEQ.aIb.css('width',Math.min(aEQ.aFd,100)+'%');aES();}},50);})();},ZU:function(aNc){this.aHh.hide();this.aHh.removeClass('active');if(aNc&&this.aGR=='film'){this.aWL.addClass('filmstripView');}},bgX:function(){setTimeout(function(){var bfU=aEQ.aHL.width()-10;aEQ.aVT.css('width',bfU+'px');var bhC=aEQ.aHL.offset();if(bhC&&(bhC.left||bhC.top)){aEQ.aVT.css('margin-left',0).css('left',parseInt(bhC.left)+'px');}},0);},aIY:function(aFc){if(typeof aFc!='undefined'){this.aHv=aFc;}aEQ.aHI.css('height','');var aHe=$('.imageThumb');if(aEQ.aHv==1||aEQ.aGR=='film'){aEQ.pI.addClass('toggleOn');aEQ.pF.removeClass('toggleOn');aEQ.abO.removeClass('toggleOn');aHe.removeClass('size2 size3');}else if(aEQ.aHv==2){aEQ.pI.removeClass('toggleOn');aEQ.pF.addClass('toggleOn');aEQ.abO.removeClass('toggleOn');aHe.removeClass('size3').addClass('size2');}else{aEQ.pI.removeClass('toggleOn');aEQ.pF.removeClass('toggleOn');aEQ.abO.addClass('toggleOn');aHe.removeClass('size2').addClass('size3');}for(var aEU=0;aEU<aEQ.aEO;aEU++){aEQ.aHz(aEU+1);}if(!aEQ.aqZ){$('.selectionMarquee').remove();aEQ.aJU.off('.dts').dragToSelect({className:'selectionMarquee',selectables:'.imageThumb',selectOnMove:true,autoScroll:true,scrollTH:50,onHide:function(){$('.dragselect_selected').toggleClass('selected').removeClass('dragselect_selected');aEQ.aJd();}});}aEQ.aHI.css('height',aEQ.aJU.prop('scrollHeight'));aEQ.aKg();},aOJ:function(){if(aEQ.bcH){return;}var aNt=50;var bdI=aEQ.aFB[aEQ.aQd-1];if(bdI){var aHv=1;if(aEQ.aGR=='grid'){aHv=aEQ.aHv;}var IV_iGalleryWidth=aEQ.aJU.width();var aHo=aEQ.aJU.height();var IV_iGalleryTop=aEQ.aJU.offset().top;var IV_iGalleryBottom=IV_iGalleryTop+aHo;var IV_iThumbHeight=aEQ.VJ[aHv-1];var IV_iBuffer=aEQ.IV_iThumbBuffer*IV_iThumbHeight;var aIn=$('#thumbnailAnchor'+aEQ.aQd,aEQ.aJU);if(aIn.length){var IV_iThumbTop=aIn.offset().top-IV_iGalleryTop;var IV_iThumbBottom=IV_iThumbTop+IV_iThumbHeight;var bcN=$('img',aIn);if(IV_iThumbBottom>IV_iGalleryTop-IV_iBuffer&&IV_iThumbTop<IV_iGalleryBottom+IV_iBuffer){if(!bcN.length){aIn.append(aEQ.IV_oDetachedThumbs[''+aEQ.aQd]);}if(bdI.aHv<aHv){bdI.aHv=aEQ.aHv;var bcq=adv(true,'convkey',bdI.aGd.substr(0,4),bdI.aFs+(bdI.aHv+1)+'g.jpg');$('img',aIn).attr('src',bcq).removeClass('loading');aNt=100;}}else if(bcN.length){aIn.empty();}}}aEQ.aQd++;if(aEQ.aQd>aEQ.aEO){aEQ.aQd=1;}clearTimeout(aEQ.bdl);aEQ.bdl=setTimeout(aEQ.aOJ,aNt);},aKg:function(){var aKq=$('#thumbnailAnchor1');if(!aKq.length){return;}this.aHI.css('padding-left','');var aIV=aKq.offset().top;var aJF=aKq.outerWidth(true);var aJw=this.aHI.width();for(var aEU=0;aEU<this.aEO;aEU++){if($('#thumbnailAnchor'+(aEU+1)).offset().top==aIV){aJw-=aJF;}else{break;}}this.aHI.css('padding-left',Math.round(aJw/2)+'px');},aNS:function(bft){if(!this.aGg){return;}bft=parseInt(bft)||0;bft= -bft;if(bft>=0){bft++;}if(bft>this.aGg){return;}var aMz=this.aGs-1+bft;if(aMz>=this.aEO){aMz-=this.aEO;}else if(aMz<0){aMz+=this.aEO;}var bfI=this.aFB[aMz];if(typeof bfI=='undefined'){return;}if(this.aFC=='full-screen'){var aMR='f';}else{var aMR=this.aGI.aIq.toString(36);}var aOj=adv(true,'convkey',bfI.aGd.substr(0,4),bfI.aFs+aMR+'g.jpg');if($.inArray(aOj,this.aMq)== -1){var aMw=new Image();aMw.src=aOj;this.aMq.push(aOj);aMw.onload=function(){aEQ.aNS(bft);};}else{aEQ.aNS(bft);}},aUV:function(){$('.imageThumb').addClass('selected');this.aJd();},aJE:function(){$('.imageThumb.selected').removeClass('selected');this.aJd();},aJd:function(){if($('.imageThumb.selected').length){var aWN=$(".imageThumb.selected").length;$('#container').addClass('imgSelectionActive').find('.selectionBubble').text(aWN+' selected').attr('title',aWN+' items selected');}else{$('.imgSelectionActive').removeClass('imgSelectionActive');}},aFS:function(){var aGi=$('#thumbnailAnchor'+this.aGs);if(!aGi.length){return;}var aFp=this.aJU.scrollTop();var aHo=this.aJU.height();var zK=50;var aIr=aGi.position().top;var aIC=aIr+aGi.height();var aIi=aFp+aIr-zK;var aIy=aFp+aIC-(aHo-zK);if(aIr<zK){aFp=aIi;}else if(aIC>aHo-zK){aFp=aIy;}this.aJU.animate({scrollTop:aFp},200);},aFa:function(aGf){if(!aGf){aGf=this.aFC;}if(aGf!='full-screen'&&this.aFC=='full-screen'){this.aWL.removeClass('fullImageView');this.ZU(true);this.aIf.hide();if(this.aFC=='full-screen'){this.aMW();}}switch(aGf){case 'auto':var aFK=this.aGx.width()-this.aIz*2;var aIB=this.aGx.height()-this.aIz*2;if(this.avI()){var aGO=aFK/this.aGA.height;var aIA=aIB/this.aGA.width;}else{var aGO=aFK/this.aGA.width;var aIA=aIB/this.aGA.height;}this.aFX(Math.min(aGO,aIA,1));this.awE();break;case 'original':var aIj=adv(true,'convkey',this.aGI.aGd.substr(0,4),this.aFs+'zg.jpg');if(this.aFC!='original'&&this.aGA.src!=aIj){this.XJ();this.aGA.src=aIj;this.aGA.onload=function(){aEQ.aER.attr('src',aEQ.aGA.src).attr('alt',aEQ.aGI.aHf);aEQ.ZU();aEQ.aFX(1);aEQ.awE();};}else{this.aFX(1);this.awE();}if(!$.inArray(aIj,this.aMq)){this.aMq.push(aIj);}break;case 'full-screen':if(this.aFC=='full-screen'){this.aGW();}else{this.aWL.addClass('fullImageView');var aIj=adv(true,'convkey',this.aGI.aGd.substr(0,4),this.aFs+'zg.jpg');if(this.aHi.src==aIj){this.aIf.show();this.aGW();}else{this.aHN.hide().attr('src','../../images/clear1x1.gif').attr('alt','Loading...');this.aIf.show();this.XJ(true);this.aHi.src=aIj;this.aHi.onload=function(){aEQ.aHN.attr('src',aEQ.aHi.src).attr('alt',aEQ.aGI.aHf);if(aEQ.aFC!='full-screen'){return;}aEQ.aHN.show();aEQ.aGW();aEQ.ZU(true);aEQ.aID();aEQ.aFz();aEQ.aNS();};}if(!$.inArray(aIj,this.aMq)){this.aMq.push(aIj);}if(aGf=='full-screen'){this.aMy();}if(this.aEO>1){this.aNr.show();this.aMG.show();}}break;default:if(this.aGA.width>this.aGA.height){var aGV=this.aIg[this.aGI.aGH][0]/this.aGA.width;}else{var aGV=this.aIg[this.aGI.aGH][1]/this.aGA.height;}this.aFX(Math.min(aGV,1));}this.aHL.show();this.aNB=0;if(aGf=='auto'){this.aFw.css('overflow','hidden');this.aER.removeClass('draggable');}else{this.aFw.css('overflow','');this.aER.addClass('draggable');}this.aFC=aGf;this.aGr();},aFX:function(aEV){if(!this.aGA.width||aEV<=0){return;}this.aFE=aEV;var aFx=Math.round(this.aGA.width*this.aFE)+'px';var aFr=Math.round(this.aGA.height*this.aFE)+'px';var aGL=(this.aGA.width-this.aGA.height)*this.aFE;this.aER.css('width',aFx).css('height',aFr);if(this.avI()){this.aFw.css('width',aFr).css('height',aFx);if(this.aqZ){this.aER.css('left','0').css('top','0');}else{this.aER.css('left',Math.round(-aGL/2)+'px').css('top',Math.round(aGL/2)+'px');}}else{this.aFw.css('width',aFx).css('height',aFr);this.aER.css('left','0').css('top','0');}},aGr:function(aGf){if(!aGf){aGf=this.aFC;}var aEP=this.aHZ[0].options;var aFk=false;for(var aEU=0;aEU<aEP.length;aEU++){aEP[aEU].selected=(aEP[aEU].value==aGf);if(aEP[aEU].selected){aFk=true;}}return aFk;},aGW:function(){var aFK=aEQ.aIf.width()-aEQ.aGh*2;var aIB=aEQ.aIf.height()-aEQ.aGh*2;if(aEQ.avI()){var aGO=aFK/aEQ.aHi.height;var aIA=aIB/aEQ.aHi.width;}else{var aGO=aFK/aEQ.aHi.width;var aIA=aIB/aEQ.aHi.height;}var aEV=Math.min(1,Math.min(aGO,aIA));var aFx=Math.round(aEQ.aHi.width*aEV)+'px';var aFr=Math.round(aEQ.aHi.height*aEV)+'px';var aGL=(aEQ.aHi.width-aEQ.aHi.height)*aEV;aEQ.aHN.css('width',aFx).css('height',aFr);if(aEQ.avI()){var aIs=(aFK-parseInt(aFr))/2;var aHu=(aIB-parseInt(aFx))/2;if(!aEQ.aqZ){aIs-=aGL/2;aHu+=aGL/2;}}else{var aIs=(aFK-parseInt(aFx))/2;var aHu=(aIB-parseInt(aFr))/2;}aEQ.aHN.css('left',Math.round(aIs+aEQ.aGh)+'px').css('top',Math.round(aHu+aEQ.aGh)+'px');if(aEQ.aHN.is(':hidden')){aEQ.aHN.fadeIn('fast');}},aMy:function(){if(document.body.requestFullscreen){document.body.requestFullscreen();}else if(document.body.requestFullScreen){document.body.requestFullScreen();}else if(document.body.webkitRequestFullScreen){document.body.webkitRequestFullScreen();}else if(document.body.mozRequestFullScreen){document.body.mozRequestFullScreen();}else if(document.body.msRequestFullScreen){document.body.msRequestFullScreen();}},aMW:function(){if(document.exitFullscreen){document.exitFullscreen();}else if(document.cancelFullScreen){document.cancelFullScreen();}else if(document.webkitCancelFullScreen){document.webkitCancelFullScreen();}else if(document.mozCancelFullScreen){document.mozCancelFullScreen();}else if(document.msCancelFullScreen){document.msCancelFullScreen();}},aID:function(aGD){var aHW=15;var aGw=this.aGP();if(aGw!==false){aHW=aGw;if(this.aGI.aGH>aHW){this.aGI.aGH=aHW;}this.aGI.aIq=aHW;}if(this.aGI.aGH==aHW&&aHW>0&&aGD== -1){var Hy=(this.aGI.aGH==11||this.aGI.aGH==9||this.aGI.aGH==7)?2:1;if(this.aER.width()-this.aIg[aHW-Hy][0]<5){aGD= -Hy-1;}}if(!aGD){return;}this.aGI.aGH=Math.max(0,Math.min(this.aGI.aGH+aGD,aHW));if(this.aGI.aGH==10){this.aGI.aGH=(aGD>0)?11:9;}else if(this.aGI.aGH==8){this.aGI.aGH=(aGD>0)?9:7;}else if(this.aGI.aGH==6){this.aGI.aGH=(aGD>0)?7:5;}if(this.aGI.aGH>this.aGI.aIq){this.aGI.aIq=this.aGI.aGH;this.XJ();this.aGA.src=adv(true,'convkey',this.aGI.aGd.substr(0,4),this.aFs+this.aGI.aGH.toString(36)+'g.jpg');this.aGA.onload=function(){aEQ.aFa('custom');aEQ.aER.attr('src',aEQ.aGA.src).attr('alt',aEQ.aGI.aHf);aEQ.ZU();aEQ.awE();};}else{this.aFa('custom');}},aGP:function(){if(this.aGI.aut){return this.aGI.aIq;}for(var aHx=0;aHx<=this.aGI.aIq;aHx++){if(aHx==8||aHx==6){continue;}if(!this.awW(this.aIg[aHx])){if(aHx>0){var Hy=(aHx==11||aHx==9||aHx==7)?2:1;if(this.aGA.width>this.aGA.height){var auE=(this.aGA.width-this.aIg[aHx-Hy][0]<5);}else{var auE=(this.aGA.height-this.aIg[aHx-Hy][1]<5);}if(auE){aHx-=Hy;this.aGI.aIq=aHx;}}this.aGI.aut=true;return aHx;}}return false;},awW:function(aIp){return(aIp[0]-this.aGA.width<5||aIp[1]-this.aGA.height<5);},awE:function(){this.aGI.aGH=1;for(var aHx=1;aHx<=15;aHx++){if(aHx==8||aHx==6){continue;}var Hy=(aHx==11||aHx==9||aHx==7)?2:1;if(this.aGA.width>this.aGA.height){if(this.aIg[aHx][0]>=this.aER.width()){if(this.aIg[aHx][0]-this.aER.width()<this.aER.width()-this.aIg[aHx-Hy][0]){this.aGI.aGH=aHx;}else{this.aGI.aGH=aHx-Hy;}break;}}else{if(this.aIg[aHx][1]>=this.aER.height()){if(this.aIg[aHx][1]-this.aER.height()<this.aER.height()-this.aIg[aHx-Hy][1]){this.aGI.aGH=aHx;}else{this.aGI.aGH=aHx-Hy;}break;}}}this.aGI.aIq=Math.max(this.aGI.aGH,this.aGI.aIq);},aIE:function(aHG){this.aER.removeClass('rot0 rot90 rot180 rot270').addClass('rot'+this.aGI.aFg);this.aHN.removeClass('rot0 rot90 rot180 rot270').addClass('rot'+this.aGI.aFg);this.aHN.hide();this.aFa();if(this.aEO>1){this.aHz();}if(aHG&&this.aGI.aIw){$.get('https://www.mediafire.com/dynamic/imagerotation.php?imgkey='+aEQ.aFs+'&newrotation='+aEQ.aGI.aFg+'&nocache='+Math.random());}},aHz:function(aGq){if(typeof aGq=='undefined'){aGq=this.aGs;}var py=$('#thumbnailContainer'+aGq+' img');py.removeClass('rot0 rot90 rot180 rot270').addClass('rot'+this.aFB[aGq-1].aFg);if(this.aqZ){var aHm=(aGq==this.aGs)? -5: -2;if(this.avI(aGq)){var aGL=py.width()-py.height();py.css('left',Math.round(-aGL/2)+'px').css('top',Math.round(aGL/2+aHm)+'px');}else{py.css('left','0').css('top',aHm+'px');}}},avI:function(aGq){if(typeof aGq=='undefined'){return(this.aGI.aFg==90||this.aGI.aFg==270);}else{return(this.aFB[aGq-1].aFg==90||this.aFB[aGq-1].aFg==270);}},aKQ:function(aKh,aKB,aMv){var aYh;if(typeof aMv=='undefined'){aYh=this.aER.data('fullsize');var aGq=this.aGs;var aJR='image';}else{aYh=$('img',aMv).data('fullsize');var aIn=$(aMv);var aGq=parseInt(aIn.attr('id').substr('thumbnailAnchor'.length));if(aIn.hasClass('selected')){var aJR='selection';$('.selected_count').html($('.imageThumb.selected').length);}else{var aJR='image';}aIn.trigger('mouseup');}this.aJk.find('ul').hide();var aKn=$('#contextmenu-gallery-'+aJR);if(typeof aMv=='undefined'||($(aMv).hasClass('active')&& !$(aMv).hasClass('selected'))){$(aKn).toggleClass('owner',aEQ.aGI.aIw==true).toggleClass('nonOwner',!aEQ.aGI.aIw).toggleClass('showFollowing',(aEQ.aGI.aRw>0)).toggleClass('viewPermission',(aEQ.aGI.aRw==1)).toggleClass('editPermission',(aEQ.aGI.aRw==2)).toggleClass('shareLinkDisabled',aEQ.aGI.aHT==true);}else if(!$(aMv).hasClass('active')&& !$(aMv).hasClass('selected')){var boj;$.each(aEQ.aFB,function(){if(this.aFs==aEQ.aFB[aGq-1].aFs)boj=this;});$(aKn).toggleClass('owner',boj.aIw==true).toggleClass('nonOwner',!boj.aIw).toggleClass('showFollowing',(boj.aRw>0)).toggleClass('viewPermission',(boj.aRw==1)).toggleClass('editPermission',(boj.aRw==2)).toggleClass('shareLinkDisabled',boj.aHT==true);}else{var iMinPermissions=3;var bShareLinkEnabled=true;var bOwner=true;$.each($('a.selected'),function(){var boy=$(this);var bpg=parseInt(boy.attr('id').substr('thumbnailAnchor'.length));var boj;$.each(aEQ.aFB,function(){if(this.aFs==aEQ.aFB[bpg-1].aFs)boj=this;});if(boj.aHT)bShareLinkEnabled=false;if(!boj.aIw)bOwner=false;iMinPermissions=(boj.aRw<iMinPermissions)?boj.aRw:iMinPermissions;});$(aKn).toggleClass('owner',bOwner==true).toggleClass('nonOwner',!bOwner).toggleClass('showFollowing',(iMinPermissions>0)).toggleClass('viewPermission',(iMinPermissions==1)).toggleClass('editPermission',(iMinPermissions==2)).toggleClass('shareLinkDisabled',bShareLinkEnabled==false);}aKn.show();this.aJk.show();var aLv=aKn.outerWidth();var aMi=aKn.outerHeight();var aKM=$(window);aKh=Math.min(aKh,aKM.width()-aLv-10);aKB=Math.min(aKB,aKM.height()-aMi-10);this.aJk.offset({left:aKh,top:aKB});var aFs=this.aFB[aGq-1].aFs;if(aJR=='image'){var aYx=$('#IV_context-copyurl-image');if(Clipboard.isSupported()){var oClipboard=new Clipboard(aYx[0],{text:function(trigger){return aYh;}});oClipboard.on('success',function(e){Zi(0,'Copied to Clipboard');});}else{aYx.hide();}$('#IV_context-download-image').on('click.iv',function(){window.location='/?'+aFs;});$('#IV_context-share-image').on('click.iv',function(){aFU(aGq);});$('#IV_context-add-image').on('click.iv',function(){aFM(aFs);});$('#IV_context-rename-image').on('click.iv',function(){aPe(aFs);});$('#IV_context-desc-image').on('click.iv',function(){aPe(aFs,true);});$('#IV_context-delete-image').on('click.iv',function(){aMg(aFs);});}},aHX:function(){this.aJk.hide().find('ul').hide();$('#IV_context-download-image, #IV_context-share-image, #IV_context-add-image, #IV_context-rename-image, #IV_context-desc-image, #IV_context-delete-image').off('click.iv');},bnm:function(){$("#container").toggleClass('owner',aEQ.aGI.aIw==true).toggleClass('nonOwner',!aEQ.aGI.aIw).toggleClass('showFollowing',(aEQ.aGI.aRw>0)).toggleClass('viewPermission',(aEQ.aGI.aRw==1)).toggleClass('editPermission',(aEQ.aGI.aRw==2)).toggleClass('shareLinkDisabled',aEQ.aGI.aHT==true);}};